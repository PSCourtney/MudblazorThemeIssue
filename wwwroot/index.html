<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MudblazorThemeIssue</title>
    <base href="/" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Material+Icons" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="MudblazorThemeIssue.styles.css" rel="stylesheet" />
    <link href="manifest.webmanifest" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <script>
        // iOS Safari PWA theme fix for MudBlazor
        // Addresses WebKit dropping injected <style> elements on app resume
        window.mudThemeIosFix = {
            init: function (styleIdGuess) {
                const tryFix = () => {
                    // Try common MudBlazor theme style ids; also allow passing one in.
                    const ids = [
                        styleIdGuess,
                        "mudblazor-theme-provider",
                        "mud-theme-provider",
                        "mudblazor-theme",
                        "mud-theme"
                    ].filter(Boolean);

                    let el = null;
                    for (const id of ids) {
                        el = document.getElementById(id);
                        if (el) break;
                    }

                    // If no id match, try finding by content (look for CSS variables)
                    if (!el) {
                        const styleElements = document.querySelectorAll('head > style');
                        for (const style of styleElements) {
                            if (style.textContent && style.textContent.includes('--mud-palette-')) {
                                el = style;
                                break;
                            }
                        }
                    }

                    // If you find the real id in devtools, put it in styleIdGuess for reliability.
                    if (!el) return;

                    // Clone+replace forces Safari/WebKit to re-evaluate the style node.
                    const clone = el.cloneNode(true);
                    el.parentNode.replaceChild(clone, el);
                };

                document.addEventListener("visibilitychange", () => {
                    if (!document.hidden) tryFix();
                });

                // pageshow fires on BFCache restores; useful for iOS standalone weirdness.
                window.addEventListener("pageshow", () => tryFix());

                // Also run once shortly after startup.
                setTimeout(tryFix, 0);
            }
        };
    </script>
    <script src="_framework/blazor.webassembly.js"></script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>
</body>

</html>
